<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
 
<mapper namespace="com.example.demo.dao.CustomerDAO">

 	<!-- Selectë¬¸ --> 

    <select id="SelectMaxID" resultType = "int">
		select Max(CustomerID) as CustomerID from Customer
    </select>

	<select id="CheckInsuranceName" parameterType="string" resultType="int">
		SELECT EXISTS (select InsuranceName from Insurance where
		InsuranceName = #{record}) as isChk
	</select>

	<select id="getInsuranceType" parameterType="int" resultType="String">
		select insuranceType from insurance where insuranceID = #{insuranceID}
	</select>	
	
	<select id="findPersonalInformationByCutomerID" parameterType="int" resultType="com.example.demo.model.Customer.PersonalInformation">
		select * from PersonalInformation where PcustomerID = #{customerID}
	</select>

	<select id="getCar" parameterType="int" resultType="com.example.demo.model.Customer.Car">
		select * from Car where CcustomerID = #{customerID}
	</select>
	
	<select id="getBuildingPrice" parameterType="int" resultType="float">
		select buildingPrice from Building where BcustomerID = #{customerID}
	</select>
	
	<select id="getActualCost" parameterType="int" resultType="com.example.demo.model.Customer.ActualCost">
		select * from ActualCost where AcustomerID = #{customerID}
	</select>	
	
    <!--  insert -->
    <insert id="insertBuilding" parameterType="HashMap">
		insert into Building values(#{customerID}, #{buildingPrice}, #{buildingAddress}, #{buildingScale})
    </insert>
 
    <insert id="insertCar" parameterType="HashMap">
		insert into Car values(#{customerID}, #{carNumber}, #{carType}, #{carCareer}, #{licenseType})
    </insert>

	<insert id="insertActualCost" parameterType="HashMap">
		insert into ActualCost values(#{customerID}, #{bloodType}, #{FamilyHistory}, #{diseaseHistory})
	</insert>

	<insert id="insertCustomer" parameterType="com.example.demo.model.Customer.Customer">
		insert into Customer values(#{customerID}, #{phoneNum}, #{customerName})
	</insert>

	<insert id="insertPersonalInformation" parameterType="HashMap">
		insert into PersonalInformation values(#{customerID}, #{accidentHistory}, #{accountNumber}, 
		#{residentRegistrationNumber}, #{gender}, #{job}, #{property})
	</insert>
	
	<update id="updatePersonalInformation" parameterType="HashMap">
		update PersonalInformation set accountNumber = #{accountNumber} where PcustomerID = #{customerID}
    </update>
</mapper>